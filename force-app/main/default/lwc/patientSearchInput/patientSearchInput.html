<template>
    <div class="patient-container">
        <div class="slds-form-element">
            <label class="slds-form-element__label" for="patientSearch">Patient Name</label>
            <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon_right">
                <lightning-icon
                    icon-name="utility:search"
                    size="x-small"
                    class="slds-input__icon slds-input__icon_right slds-icon-text-default"
                ></lightning-icon>
                <input
                    type="text"
                    id="patientSearch"
                    class="slds-input"
                    placeholder="Search Patient..."
                    value={searchKey}
                    oninput={handleSearchChange}
                />
            </div>
        </div>

        <!-- Lista de resultados -->
        <template if:true={patients}>
            <div class="slds-p-top_x-small">
                <template for:each={patients} for:item="patient">
                    <div
                        key={patient.Id}
                        onclick={handleSelect}
                        class="slds-p-vertical_x-small slds-border_bottom slds-text-body_regular slds-text-link"
                    >
                        {patient.Name}
                    </div>
                </template>
            </div>
        </template>

        <!-- Spinner visible durante la carga -->
        <template if:true={showLoading}>
            <div class="slds-p-top_x-small">
                <lightning-spinner alternative-text="Loading Patient..." size="small"></lightning-spinner>
            </div>
        </template>
    </div>
</template>
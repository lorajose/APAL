<!-- <template>
<div class="practice-container">
<div class="slds-form-element">
<label class="slds-form-element__label" for="practiceSearch">Name</label>
<div class="slds-form-element__control slds-input-has-icon slds-input-has-icon_right">
<lightning-icon
icon-name="utility:search"
size="x-small"
class="slds-input__icon slds-input__icon_right slds-icon-text-default"
></lightning-icon>
<input
type="text"
id="practiceSearch"
class="slds-input"
placeholder="Search Practice..."
value={searchKey}
oninput={handleSearchChange}
/>
</div>
</div>

       Lista de resultados 
      <template for:each={practices} for:item="practice">
  <div key={practice.Id}>
    <button
      class="slds-button slds-text-link slds-p-vertical_x-small slds-border_bottom slds-text-body_regular"
      data-id={practice.Id}
      data-name={practice.Name}
      onclick={handleSelect}
    >
      {practice.Name}
    </button>
  </div>
</template>

 Spinner visible durante la carga 
<template if:true={showLoading}>
<div class="slds-p-top_x-small">
<lightning-spinner alternative-text="Opening New Practice..." size="small"></lightning-spinner>
</div>
</template>
</div>
</template> -->

<!-- <template>
  <div class="practice-container">
    <div class="slds-form-element">
      <label class="slds-form-element__label" for="practiceSearch">Name</label>

       Contenedor tipo combobox (lookup dropdown) 
      <div
        class={comboboxClass}
        aria-expanded={isDropdownOpen}
        aria-haspopup="listbox"
        role="combobox"
      >
         Campo de bÃºsqueda 
        <div
          class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right"
          role="none"
        >
        <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon_left">
  <lightning-icon 
      icon-name="standard:account" 
      size="x-small"
      class="slds-icon slds-input__icon slds-input__icon_left slds-icon-text-default">
  </lightning-icon>

  <input 
    type="text"
    id="practiceSearch"
    class="slds-input slds-combobox__input"
    placeholder="Search Practice..."
    value={searchKey}
    oninput={handleSearchChange}
    onfocus={handleFocus}
    onblur={handleBlur}
    aria-autocomplete="list"
    aria-controls="practice-listbox"
  />
</div>

          <span
            class="slds-icon_container slds-icon-utility-search slds-input__icon slds-input__icon_right"
          >
            <lightning-icon icon-name="utility:search" size="x-small"></lightning-icon>
          </span>
        </div>

         ðŸ”½ Dropdown de resultados 
        <div
          if:true={isDropdownOpen}
          id="practice-listbox"
          class="slds-dropdown slds-dropdown_length-5 slds-dropdown_fluid"
          role="listbox"
        >
          <ul class="slds-listbox slds-listbox_vertical" role="presentation">
            <template if:true={practices.length}>
              <template for:each={practices} for:item="practice">
                <li key={practice.Id} role="presentation" class="slds-listbox__item">
                  <div
                    class="slds-media slds-listbox__option slds-listbox__option_entity slds-listbox__option_has-meta"
                    role="option"
                    data-id={practice.Id}
                    data-name={practice.Name}
                    onclick={handleSelect}
                  >
                    <span class="slds-media__figure slds-listbox__option-icon">
                      <lightning-icon
                        icon-name="standard:account"
                        size="small"
                      ></lightning-icon>
                    </span>
                    <span class="slds-media__body">
                      <span
                        class="slds-listbox__option-text slds-listbox__option-text_entity"
                      >
                        {practice.Name}
                      </span>
                      <span class="slds-listbox__option-meta">{practice.Phone}</span>
                    </span>
                  </div>
                </li>
              </template>
            </template>

             Mensaje cuando no hay resultados 
            <template if:false={practices.length}>
              <li class="slds-listbox__item">
                <span class="slds-text-color_weak slds-p-around_x-small"
                  >No results found</span
                >
              </li>
            </template>
          </ul>
        </div>
      </div>
    </div>

     ðŸ”„ Spinner visible durante la carga 
    <template if:true={showLoading}>
      <div class="slds-p-top_x-small">
        <lightning-spinner
          alternative-text="Opening New Practice..."
          size="small"
        ></lightning-spinner>
      </div>
    </template>
  </div>
</template> -->


<template>
  <div class="practice-container">
    <div class="slds-form-element">
      <label class="slds-form-element__label" for="practiceSearch">Name</label>

      <!-- Contenedor tipo combobox (lookup dropdown) -->
      <div
        class={comboboxClass}
        aria-expanded={isDropdownOpen}
        aria-haspopup="listbox"
        role="combobox"
      >
        <!-- Campo de bÃºsqueda con Ã­conos a ambos lados -->
        <div
          class="slds-combobox__form-element slds-input-has-icon slds-input-has-icon_left-right"
          role="none"
        >
          <!-- ðŸ¢ Icono fijo a la izquierda -->
          <lightning-icon
            icon-name="standard:account"
            size="x-small"
            class="slds-input__icon slds-input__icon_left slds-icon-text-default"
          ></lightning-icon>

          <!-- ðŸ”¤ Input -->
          <input
            type="text"
            id="practiceSearch"
            class="slds-input slds-combobox__input"
            placeholder="Search Practice..."
            value={searchKey}
            oninput={handleSearchChange}
            onfocus={handleFocus}
            onblur={handleBlur}
            aria-autocomplete="list"
            aria-controls="practice-listbox"
          />

          <!-- ðŸ” Icono dinÃ¡mico a la derecha -->
          <template if:true={isInputFilled}>
            <button
              class="slds-button slds-button_icon slds-input__icon slds-input__icon_right"
              title="Clear selection"
              onclick={clearSelection}
              type="button"
            >
              <lightning-icon
                icon-name="utility:close"
                size="x-small"
                class="slds-icon slds-icon-text-default"
              ></lightning-icon>
            </button>
          </template>
          <template if:false={isInputFilled}>
            <lightning-icon
              icon-name="utility:search"
              size="x-small"
              class="slds-input__icon slds-input__icon_right slds-icon-text-default"
            ></lightning-icon>
          </template>
        </div>

        <!-- ðŸ”½ Dropdown de resultados -->
        <div
          if:true={isDropdownOpen}
          id="practice-listbox"
          class="slds-dropdown slds-dropdown_length-5 slds-dropdown_fluid"
          role="listbox"
        >
          <ul class="slds-listbox slds-listbox_vertical" role="presentation">
            <template if:true={practices.length}>
              <template for:each={practices} for:item="practice">
                <li key={practice.Id} role="presentation" class="slds-listbox__item">
                  <div
                    class="slds-media slds-listbox__option slds-listbox__option_entity slds-listbox__option_has-meta"
                    role="option"
                    data-id={practice.Id}
                    data-name={practice.Name}
                    onclick={handleSelect}
                  >
                    <span class="slds-media__figure slds-listbox__option-icon">
                      <lightning-icon
                        icon-name="standard:account"
                        size="small"
                      ></lightning-icon>
                    </span>
                    <span class="slds-media__body">
                      <span
                        class="slds-listbox__option-text slds-listbox__option-text_entity"
                      >
                        {practice.Name}
                      </span>
                      <span class="slds-listbox__option-meta">{practice.Phone}</span>
                    </span>
                  </div>
                </li>
              </template>
            </template>

            <!-- ðŸ•³ï¸ Sin resultados -->
            <template if:false={practices.length}>
              <li class="slds-listbox__item">
                <span class="slds-text-color_weak slds-p-around_x-small">
                  No results found
                </span>
              </li>
            </template>
          </ul>
        </div>
      </div>
    </div>

    <!-- â³ Spinner visible durante la carga -->
    <template if:true={showLoading}>
      <div class="slds-p-top_x-small">
        <lightning-spinner
          alternative-text="Opening New Practice..."
          size="small"
        ></lightning-spinner>
      </div>
    </template>
  </div>
</template>
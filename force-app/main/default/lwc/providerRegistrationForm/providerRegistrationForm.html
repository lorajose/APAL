<template>
    <div class="provider-info-form">

        <h1>Provider Registration</h1>

        <!-- Mensaje de errores -->
        <div id="form-error-message" class="form-error hidden"></div>

        <div class="form-container">

            <!-- Progress Bar -->
            <ul class="progressbar">
                <li class={step1ProgressClass}>Provider Info</li>
                <li class={step2ProgressClass}>Additional Contact Info</li>
                <li class={step3ProgressClass}>How Did You Hear?</li>
                <li class={step4ProgressClass}>Demographics</li>
                <li class={step5ProgressClass}>Confidentiality</li>
            </ul>

            <!-- FORM -->

               <!-- <form id="multi-step-form" action="https://test.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8&orgId=00Dcn00000462T3" method="POST"
                     onsubmit={handleSubmit}> Dev -->

              <!--  <form id="multi-step-form"  action="https://test.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8&orgId=00Dcn00000462Uf" method="POST"
                    onsubmit={handleSubmit}> QA-->

               <form id="multi-step-form"  action="https://test.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8&orgId=00Dcn00000462ZV" method="POST"
                    onsubmit={handleSubmit}> <!-- UAT -->

                      <!-- <form action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8&orgId=00D820000008huw"
                method="POST" id="multi-step-form"> PROD-->

                <!-- Salesforce Hidden Fields -->
                <!-- <input type=hidden name="oid" value="00Dcn00000462T3" /> Dev--> 
                <!-- <input type=hidden name="oid" value="00Dcn00000462Uf" /> QA-->
                 <input type=hidden name="oid" value="00Dcn00000462ZV" /> <!-- UAT -->
                 <!--<input type="hidden" name="oid" value="00D820000008huw" /> PROD-->
                
                <input type="hidden" name="debugEmail" value="jose.loravargas@customertimes.com" />
                <input type="hidden" name="retURL" value="https://www.msv.org/programs/apal/" />
                <input type="hidden" id="lead_source" name="lead_source" value="Web" />
                <input type="hidden" id="npi" name="Does_the_provider_have_NPI__c" value="Yes" />
               <!-- <input type="hidden" name="recaptcha_response" id="recaptchaResponse" /> -->

               <input type="hidden" name="recaptcha_response" id="recaptchaResponse" />

                <!-- STEP 1 -->
                <div class={step1Class}>
                    <h3>Step 1: Provider Information</h3>

                    <!-- First Name -->
                    <label for="first_name">First Name <span style="color:red">*</span></label>
                    <input type="text" id="first_name" name="first_name" required placeholder="First Name"
                        oninput={handleFieldInput} />

                    <!-- Last Name -->
                    <label for="last_name">Last Name <span style="color:red">*</span></label>
                    <input type="text" id="last_name" name="last_name" required placeholder="Last Name"
                        oninput={handleFieldInput} />

                    <!-- NPI -->
                    <label for="provider-npi">Provider NPI # <span style="color:red">*</span></label>
                    <input type="text" id="provider-npi" name="pcpnpi__c" maxlength="10" minlength="10" required
                        pattern="\d{10}" placeholder="10-digit NPI" oninput={handleFieldInput} />

                    <!-- Email -->
                    <label for="email">Email <span style="color:red">*</span></label>
                    <input type="email" id="email" name="email" required placeholder="example@domain.com"
                        oninput={handleFieldInput} />

                    <!-- Phone -->
                    <label for="phone">Practice/Work Phone <span style="color:red">*</span></label>
                    <input type="text" id="phone" name="phone" required placeholder="(___) ___-____"
                        pattern="\(\d{3}\)\s?\d{3}-\d{4}" oninput={handlePhoneInput} />

                    <!-- Phone Ext -->
                    <label for="phone-ext">Phone Extension</label>
                    <input type="text" id="phone-ext" name="Phone_Extension__c" maxlength="5"
                        placeholder="Up to 5 digits" oninput={handlePhoneExtInput} />

                    <!-- Provider Type -->
                    <label for="type">Provider Type <span style="color:red">*</span></label>
                    <select id="type" name="Type__c" required onchange={handleToggleFields}>
                        <option value="">--Select--</option>
                        <option value="Physician (MD, DO)">Physician (MD, DO)</option>
                        <option value="Nurse practitioner (NP)">Nurse practitioner (NP)</option>
                        <option value="Physician's Assistant (PA)">Physician's Assistant (PA)</option>
                        <option value="Other">Other</option>
                    </select>

                    <!-- Provider Other -->
                    <label id="Other-Provider-id" for="pcpothersta_desc__c" class="hidden">
                        Other Provider Type <span style="color:red">*</span>
                    </label>
                    <input type="text" id="pcpothersta_desc__c" name="pcpothersta_desc__c" class="hidden"
                        placeholder="Describe provider type" oninput={handleFieldInput} />

                    <!-- Specialty -->
                    <label for="specialty-desc">Specialty <span style="color:red">*</span></label>
                    <select id="specialty-desc" name="Specialty_Description__c" required onchange={handleToggleFields}>
                        <option value="">--Select--</option>
                        <option value="Orthopedic">Orthopedic</option>
                        <option value="Family Medicine">Family Medicine</option>
                        <option value="Obstetrics and Gynecology">Obstetrics and Gynecology</option>
                        <option value="Emergency Medicine">Emergency Medicine</option>
                        <option value="Geriatrician">Geriatrician</option>
                        <option value="Care Coordinator">Care Coordinator</option>
                        <option value="Mental Health Provider">Mental Health Provider</option>
                        <option value="Other">Other</option>
                    </select>

                    <!-- Specialty Other -->
                    <label id="Other-specialty-id" for="other-specialty-desc" class="hidden">
                        Other Specialty <span style="color:red">*</span>
                    </label>
                    <input type="text" id="other-specialty-desc" name="Other_Specialty_Description__c" class="hidden"
                        placeholder="Describe specialty" oninput={handleFieldInput} />

                    <!-- Years in Practice -->
                    <label for="Number_of_Years_In_Practice__c">Number of Years in Practice <span
                            style="color:red">*</span></label>
                    <input type="text" id="Number_of_Years_In_Practice__c" name="Number_of_Years_In_Practice__c"
                        required placeholder="Example: 2" oninput={handleFieldInput} />

                    <!-- Trainee? -->
                    <label for="The_provider_is_a_Trainee__c">
                        The provider is a Trainee? <span style="color:red">*</span>
                    </label>
                    <select id="The_provider_is_a_Trainee__c" name="The_provider_is_a_Trainee__c" required
                        onchange={handleToggleFields}>
                        <option value="">--None--</option>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>

                    <!-- Trainee Type -->
                    <label id="Trainee_Type_Label" for="Trainee_Type__c" class="hidden">
                        Trainee Type <span style="color:red">*</span>
                    </label>
                    <select id="Trainee_Type__c" name="Trainee_Type__c" class="hidden" onchange={handleToggleFields}>
                        <option value="">--None--</option>
                        <option value="Student in a medical field (e.g., medical student, PA student)">
                            Student in a medical field
                        </option>
                        <option value="Resident (or equivalent within other medical fields)">Resident</option>
                        <option value="Fellow (or equivalent within other medical fields)">Fellow</option>
                        <option value="Other medical trainee">Other medical trainee</option>
                    </select>

                    <!-- Other Trainee -->
                    <label id="otherMedicalTraineeDescriptionid" for="Other_Medical_Trainee_Description__c"
                        class="hidden">
                        Other Medical Trainee Description <span style="color:red">*</span>
                    </label>
                    <input id="Other_Medical_Trainee_Description__c" name="Other_Medical_Trainee_Description__c"
                        class="hidden" placeholder="Describe your trainee status" oninput={handleFieldInput} />

                    <!-- Training End -->
                    <label id="trainenddate_label" for="trainenddate" class="hidden">
                        Date When Training Will End <span style="color:red">*</span>
                    </label>
                    <input type="date" id="trainenddate" class="hidden" onchange={handleFieldInput} />
                    <input type="hidden" id="trainenddate_hidden" name="trainenddate__c" />
                    <small id="trainenddate_hint" class="hidden date-format-hint">Format: 12/31/2024</small>

                    <!-- MH Training -->
                    <label for="Specialty_Mental_Health_Training__c">
                        Specialty Mental Health Training? <span style="color:red">*</span>
                    </label>
                    <select id="Specialty_Mental_Health_Training__c" name="Specialty_Mental_Health_Training__c" required
                        onchange={handleToggleFields}>
                        <option value="">--None--</option>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>

                    <!-- MH Description -->
                    <label id="mhTrainingDescLabel" for="Specialty_Mental_Health_Training_Desc__c" class="hidden">
                        Describe Previous Mental Health Training <span style="color:red">*</span>
                    </label>

                    <input type="text" id="Specialty_Mental_Health_Training_Desc__c"
                        name="Specialty_Mental_Health_Training_Desc__c" class="hidden" maxlength="255"
                        placeholder="Briefly describe your MH training" oninput={handleFieldInput} />

                    <!-- Buttons -->
                    <div class="button-container">
                        <button type="button" class="next-btn" onclick={handleNext}>Next</button>
                    </div>
                </div>

                <!-- STEP 2 -->
                <div class={step2Class}>
                    <h3>Step 2: Additional Contact Information</h3>

                    <label for="home-phone">Home Phone</label>
                    <input type="text" id="home-phone" name="Home_Phone__c" placeholder="(___) ___-____"
                        pattern="\(\d{3}\)\s?\d{3}-\d{4}" oninput={handlePhoneInput} />

                    <label for="mobile">Mobile Phone</label>
                    <input type="text" id="mobile" name="mobile" placeholder="(___) ___-____"
                        pattern="\(\d{3}\)\s?\d{3}-\d{4}" oninput={handlePhoneInput} />

                    <div class="button-container">
                        <button type="button" class="prev-btn" onclick={handlePrev}>Previous</button>
                        <button type="button" class="next-btn" onclick={handleNext}>Next</button>
                    </div>
                </div>

                <!-- STEP 3 -->
                <div class={step3Class}>
                    <h3>Step 3: How Did You Hear About Us?</h3>

                    <label><input type="checkbox" id="health-haven-staff" name="Health_Haven_staff__c" value="true" />
                        APAL or HealthHaven Staff</label>
                    <label><input type="checkbox" id="enrolled-provider" name="Health_Haven_Enrolled_Provider__c"
                            value="true" /> APAL or HealthHaven Enrolled Provider</label>
                    <label><input type="checkbox" id="friend-colleague" name="Friend_or_Colleague__c" value="true" />
                        Friend or Colleague</label>
                    <label><input type="checkbox" id="friend-association" name="My_Medical_or_Specialty_Association__c"
                            value="true" /> Medical or Specialty Association</label>
                    <label><input type="checkbox" id="friend-media" name="Social_Media__c" value="true" /> Social
                        Media</label>
                    <label><input type="checkbox" id="search-engine" name="Search_Engine__c" value="true" /> Search
                        Engine</label>
                    <label><input type="checkbox" id="news-story" name="News_Story__c" value="true" /> News
                        Story</label>
                    <label><input type="checkbox" id="conference" name="Conference_presentation_or_exhibit__c"
                            value="true" /> Presentation or Exhibit</label>

                    <label>
                        <input type="checkbox" id="otherCheck"  data-id="otherCheck" name="Other__c" value="true"
                            onchange={handleToggleFields} />
                        Other
                    </label>

                    <label id="heard_other_label"  data-id="heard_other_label" for="heard_other" class="hidden">
                        How did you hear about APAL? (Other) <span style="color:red">*</span>
                    </label>

                    <input type="text" id="heard_other"  data-id="heard_other" name="heard_other__c" class="hidden"
                        placeholder="Please specify" oninput={handleFieldInput} />

                    <div class="button-container">
                        <button type="button" class="prev-btn" onclick={handlePrev}>Previous</button>
                        <button type="button" class="next-btn" onclick={handleNext}>Next</button>
                    </div>
                </div>

                <!-- STEP 4 -->
                <div class={step4Class}>
                    <h3>Step 4: Provider Demographics</h3>

                    <label for="Do_you_think_of_yourself_as__c">Do you think of yourself as</label>
                    <select id="Do_you_think_of_yourself_as__c" name="Do_you_think_of_yourself_as__c">
                        <option value="">--None--</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="Other">Other</option>
                        <option value="Decline to answer">Decline to answer</option>
                    </select>

                    <label for="How_do_You_Identify_with_Respect_to_Race__c">How do you identify with respect to
                        Race?</label>
                    <select id="How_do_You_Identify_with_Respect_to_Race__c"
                        name="How_do_You_Identify_with_Respect_to_Race__c" onchange={handleToggleFields}>
                        <option value="">--None--</option>
                        <option value="American Indian or Alaska Native">American Indian or Alaska Native</option>
                        <option value="Asian">Asian</option>
                        <option value="Black or African American">Black or African American</option>
                        <option value="Hispanic/ Latinx/ Spanish">Hispanic/ Latinx/ Spanish</option>
                        <option value="Native Hawaiian or Pacific Islander">Native Hawaiian or Pacific Islander</option>
                        <option value="Middle Eastern/ North African">Middle Eastern / North African</option>
                        <option value="Multiple race/ Biracial">Multiple race / Biracial</option>
                        <option value="White or Caucasian">White or Caucasian</option>
                        <option value="Prefer to self-describe (option not listed)">Prefer to self-describe</option>
                        <option value="Prefer not to answer">Prefer not to answer</option>
                    </select>

                    <label id="pcpracedesc-id" for="pcpracedesc" class="hidden">
                        Provider Race Description <span style="color:red">*</span>
                    </label>
                    <input type="text" id="pcpracedesc" name="pcpracedesc__c" maxlength="255" class="hidden"
                        oninput={handleFieldInput} />

                    <label for="Provider_Language_other_than_English__c">
                        Provider Language (other than English)
                    </label>
                    <select id="Provider_Language_other_than_English__c" name="Provider_Language_other_than_English__c"
                        onchange={handleToggleFields}>
                        <option value="">--None--</option>
                        <option value="Spanish">Spanish</option>
                        <option value="Other">Other</option>
                    </select>

                    <label id="Provider-Description-id" for="Provider_Languages_Description__c" class="hidden">
                        Other Languages <span style="color:red">*</span>
                    </label>

                    <input id="Provider_Languages_Description__c" name="Provider_Languages_Description__c"
                        maxlength="255" class="hidden" oninput={handleFieldInput} />

                    <div class="button-container">
                        <button type="button" class="prev-btn" onclick={handlePrev}>Previous</button>
                        <button type="button" class="next-btn" onclick={handleNext}>Next</button>
                    </div>
                </div>

                <!-- STEP 5 -->
                <div class={step5Class}>
                    <h3>Step 5: Confidentiality</h3>

                    <label for="opt_out">Opt-out</label>
                    <input type="checkbox" id="opt_out" name="Opt_out__c" value="true" />

                   <!-- <div class="g-recaptcha" data-sitekey="6LerTNcqAAAAAI5br6iw0fBj7PeJjSbw_LkEOa6F"
                        data-callback="providerRecaptchaCallbackLwc"></div> -->

                        
                    <div class="button-container">
                        <button type="button" class="prev-btn" onclick={handlePrev}>Previous</button>
                       <!-- <button type="button" id="submit-complete" class="submit-btn" onclick={handleSubmit}>
                            Submit
                        </button> -->
                        <button type="submit" id="submit-complete" class="submit-btn">
                            Submit
                        </button>
                    </div>
                </div>

            </form>
        </div>


        <div id="thank-you-modal" class="thank-you-modal">
            <div id="modal-content" class="modal-content">

                <span id="close-btn" class="close-btn" onclick={closeModal}>&times;</span>

                <p>
                    Thank you for registering with APAL! As our program grows,
                    we will keep you informed about educational opportunities
                    and access to the APAL line.
                    Questions? Contact cford@msv.org.
                </p>
            </div>
        </div>

    </div>
</template>